# Redis

## Q1：Redis 为什么快？

1. 基于内存
2. IO 多路复用、单线程处理，无线程切换开销
3. 特殊的数据结构

## Q2：Memchache 和 Redis 的区别？

1. 相同点：
   - 都是基于内存的数据库，一般都用来当做缓存使用。
   - 都有过期策略。
   - 两者的性能都非常高。
2. 不同点：
   以下是将您提供的 Redis 与 Memcached 对比信息整理成的清晰表格：

| **对比维度**         | **Redis**                                                                                                         | **Memcached**                                                  |
| -------------------- | ----------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------- |
| **数据类型**         | 支持丰富的数据类型，包括：string、list、set、zset（有序集合）、hash、bitmap、hyperloglog 等，适用于复杂应用场景。 | 仅支持简单的 key/value（字符串）类型。                         |
| **数据持久化**       | 支持持久化机制（RDB 快照 和 AOF 日志），可将内存数据保存到磁盘，支持重启恢复，具备灾难恢复能力。                  | 数据仅存在于内存中，不支持持久化，重启后数据全部丢失。         |
| **集群模式支持**     | 自 Redis 3.0 起原生支持集群模式（Redis Cluster），支持自动分片和高可用。                                          | 无原生集群支持，需依赖客户端实现分片（如一致性哈希）。         |
| **线程模型**         | 默认采用单线程的多路 IO 复用模型（处理命令）；从 Redis 6.0 开始，网络 I/O 引入多线程以提升吞吐。                  | 采用多线程 + 非阻塞 IO 复用模型，可充分利用多核 CPU 提高性能。 |
| **特性支持**         | 支持发布/订阅（Pub/Sub）、Lua 脚本、事务（multi/exec）、流水线（pipeline）、地理信息等高级功能。                  | 功能较简单，不支持发布订阅、脚本、事务等复杂功能。             |
| **编程语言支持**     | 支持更多编程语言的客户端，生态更丰富。                                                                            | 支持主流语言，但整体生态和功能扩展不如 Redis。                 |
| **过期数据删除策略** | 同时使用 **惰性删除** 和 **定期删除** 两种策略，更高效地管理过期键。                                              | 仅使用 **惰性删除** 策略，过期数据仅在访问时才被清除。         |

---

**总结**：  
Redis 在功能丰富性、持久化、集群支持、高级特性等方面全面优于 Memcached，适用于更复杂的业务场景。而 Memcached 更轻量、简单，适用于以高性能缓存为主、无需持久化和复杂数据结构的场景。在现代应用中，**Redis 更常被作为首选缓存和存储方案**。

## Q3：Redis 的读写策略？

1. 旁路缓存

   - 应用程序先查询缓存，如果缓存中不存在数据，则查询数据库，将查询结果写入缓存，然后返回给应用程序。
   - 应用程序更新数据时，先更新数据库，然后删除缓存中的数据。

2. 读写穿透

   **写：**

   - 先查 cache，cache 中不存在，直接更新 db。
   - cache 中存在，则先更新 cache，然后 cache 服务自己更新 db（同步更新 cache 和 db）。

   **读：**

   - 从 cache 中读取数据，读取到就直接返回。
   - 读取不到的话，先从 db 加载，写入到 cache 后返回响应。

## Q4：Redis 和本地缓存的区别？

以下是根据您提供的信息整理的表格，对比本地缓存和 Redis 在不同特性上的表现：

| **特性**         | **本地缓存**                         | **Redis**                        |
| ---------------- | ------------------------------------ | -------------------------------- |
| **数据一致性**   | 多服务器部署时存在数据不一致问题     | 数据一致                         |
| **内存限制**     | 受限于单台服务器内存                 | 独立部署，内存空间更大           |
| **数据丢失风险** | 服务器宕机数据丢失                   | 可持久化，数据不易丢失           |
| **管理维护**     | 分散，管理不便                       | 集中管理，提供丰富的管理工具     |
| **功能丰富性**   | 功能有限，通常只提供简单的键值对存储 | 功能丰富，支持多种数据结构和功能 |

## Q5：除了缓存，Redis 还有哪些应用场景？

1. 分布式锁
2. 分布式 session 管理
3. 计数器
4. 排行榜

## Q6：Redis 有哪些数据结构？

1. 字符串（string）

   > `key-value` 结构，不仅可以存放 string，还可以存放 int 类型的数据。value 可以存放 int 和 SDS（简单动态字符串）。

    <img src = '../images/string结构-编码方式.webp' width = '500px'>

2. 哈希（hash）
3. 列表（list）
4. 集合（set）
5. 有序集合（sorted set）
